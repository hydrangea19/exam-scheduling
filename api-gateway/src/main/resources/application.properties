spring.application.name=api-gateway
spring.profiles.active=dev

# === Spring Cloud Gateway Routes ===
# User Management Service
spring.cloud.gateway.routes[0].id=user-management
spring.cloud.gateway.routes[0].uri=http://localhost:8001
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/users/**
spring.cloud.gateway.routes[0].filters[0]=RewritePath=/api/users/(?<path>.*), /api/${path}

# External Integration Service
spring.cloud.gateway.routes[1].id=external-integration
spring.cloud.gateway.routes[1].uri=http://localhost:8002
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/external/**
spring.cloud.gateway.routes[1].filters[0]=RewritePath=/api/external/(?<path>.*), /api/${path}

# Preference Management Service
spring.cloud.gateway.routes[2].id=preference-management
spring.cloud.gateway.routes[2].uri=http://localhost:8003
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/preferences/**
spring.cloud.gateway.routes[2].filters[0]=RewritePath=/api/preferences/(?<path>.*), /api/${path}

# Scheduling Service
spring.cloud.gateway.routes[3].id=scheduling
spring.cloud.gateway.routes[3].uri=http://localhost:8004
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/scheduling/**
spring.cloud.gateway.routes[3].filters[0]=RewritePath=/api/scheduling/(?<path>.*), /api/${path}

# Publishing Service
spring.cloud.gateway.routes[4].id=publishing
spring.cloud.gateway.routes[4].uri=http://localhost:8005
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/publishing/**
spring.cloud.gateway.routes[4].filters[0]=RewritePath=/api/publishing/(?<path>.*), /api/${path}

# === Test Routes ===
spring.cloud.gateway.routes[5].id=test-user-management
spring.cloud.gateway.routes[5].uri=http://localhost:8001
spring.cloud.gateway.routes[5].predicates[0]=Path=/test/users/**
spring.cloud.gateway.routes[5].filters[0]=RewritePath=/test/users/(?<path>.*), /api/test/${path}
spring.cloud.gateway.routes[6].id=test-external
spring.cloud.gateway.routes[6].uri=http://localhost:8002
spring.cloud.gateway.routes[6].predicates[0]=Path=/test/external/**
spring.cloud.gateway.routes[6].filters[0]=RewritePath=/test/external/(?<path>.*), /api/test/${path}
spring.cloud.gateway.routes[7].id=test-preferences
spring.cloud.gateway.routes[7].uri=http://localhost:8003
spring.cloud.gateway.routes[7].predicates[0]=Path=/test/preferences/**
spring.cloud.gateway.routes[7].filters[0]=RewritePath=/test/preferences/(?<path>.*), /api/test/${path}
spring.cloud.gateway.routes[8].id=test-scheduling
spring.cloud.gateway.routes[8].uri=http://localhost:8004
spring.cloud.gateway.routes[8].predicates[0]=Path=/test/scheduling/**
spring.cloud.gateway.routes[8].filters[0]=RewritePath=/test/scheduling/(?<path>.*), /api/test/${path}
spring.cloud.gateway.routes[9].id=test-publishing
spring.cloud.gateway.routes[9].uri=http://localhost:8005
spring.cloud.gateway.routes[9].predicates[0]=Path=/test/publishing/**
spring.cloud.gateway.routes[9].filters[0]=RewritePath=/test/publishing/(?<path>.*), /api/test/${path}

server.port=8000

management.endpoints.web.exposure.include=health,info,env
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always

logging.level.mk.ukim.finki.examscheduling.apigateway=DEBUG
logging.level.org.springframework.security=DEBUG
